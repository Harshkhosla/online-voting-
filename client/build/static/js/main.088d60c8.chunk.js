(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{172:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(26),c=a.n(r),o=(a(72),a(1)),s=a(11),i=a(6),m=function(){var e=Object(s.f)(),t=Object(n.useContext)(A),a=t.state,r=t.dispatch,c=localStorage.getItem("currentUser");return console.log("currentUser",c),l.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},l.a.createElement("div",{className:"nav-wrapper blue",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},l.a.createElement("div",null,l.a.createElement(i.b,{to:a?"/":"/signin",className:"brand-logo center",style:{color:"white",fontSize:"30px",textDecoration:"none",fontFamily:"Acme"}},"Online Voting System")),l.a.createElement("div",{style:{marginLeft:"60px"}},a&&a.isAdmin&&l.a.createElement("li",{style:{fontSize:"22px",fontWeight:"600",color:"white",float:"right",listStyleType:"none"}},l.a.createElement(i.b,{to:"/result",style:{color:"white",textDecoration:"none",fontSize:"20px",fontWeight:"600"}},l.a.createElement("i",{className:"fas fa-poll"})," "," ","Result"))),l.a.createElement("div",{style:{marginLeft:"60px"}},a&&l.a.createElement("li",{style:{fontSize:"22px",fontWeight:"600",color:"white",float:"right",listStyleType:"none"},onClick:function(){localStorage.clear(),r({type:"CLEAR"}),e.push("/signin")}},l.a.createElement("i",{className:"far fa-sign-out "})," "," "," Logout"))))},u=(a(77),a(62)),p=a(41),d=a(28),h=a.n(d),f=(a(63),function(){Object(s.f)();var e=JSON.parse(localStorage.getItem("user"));return l.a.createElement("div",null,null!==e?l.a.createElement("div",{className:"card",style:{padding:"10px"}},l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("b",null,e.firstname)),l.a.createElement("img",{src:e.pic,style:{height:"140px",width:"140px",borderRadius:"50%",marginLeft:"27%",marginBottom:"10px"}}),l.a.createElement("p",null,l.a.createElement("b",null,"Name : "),e.firstname," ",e.lastname),l.a.createElement("p",null,l.a.createElement("b",null,"Gender : "),e.branch),l.a.createElement("p",null,l.a.createElement("b",null,"Reg.No : "),e.mobile),l.a.createElement("p",null,l.a.createElement("b",null,"City : "),e.city),l.a.createElement("p",null,l.a.createElement("b",null,"State : "),e.stateName)):"")}),g=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(A),s=c.state;c.dispatch;Object(n.useEffect)((function(){fetch("http://localhost:5000/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),r(e.posts)}))}),[]);var i;null!==JSON.parse(localStorage.getItem("user"))&&(i=JSON.parse(localStorage.getItem("user"))._id);var m,d=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user"))._id:null,g=a.map((function(e){return e.votes.filter((function(e){return e}))})),E=!1,b=Object(p.a)(g);try{for(b.s();!(m=b.n()).done;){var y=m.value;if(y.length>0){var v,x=Object(p.a)(y);try{for(x.s();!(v=x.n()).done;){v.value==i&&(E=!0)}}catch(j){x.e(j)}finally{x.f()}}}}catch(j){b.e(j)}finally{b.f()}return l.a.createElement("div",null,l.a.createElement("div",{className:"col-md-8",style:{margin:"auto",paddingTop:"5%"}},l.a.createElement("div",{className:"col-md-3",style:{float:"left",border:"1px solid green"}},l.a.createElement(f,null)),l.a.createElement("div",{className:"col-md-8",style:{float:"right",backgroundColor:"white",padding:"10px"}},a.map((function(e,t){return l.a.createElement("div",{key:e._id,style:{marginBottom:"10px",backgroundColor:"#f2f4f6",height:"100px",borderRadius:"15px",padding:"25px"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},l.a.createElement("h6",null,l.a.createElement("b",{style:{}},t+1)),l.a.createElement("h6",null,l.a.createElement("b",{style:{}},e.title.split(" ")[0])),l.a.createElement("img",Object(u.a)({src:e.photo,style:{height:"200px",width:"200px"}},"style",{width:"60px",height:"60px"})),l.a.createElement("div",{className:"card-content"},e.votes.includes(s._id)||0!=E?"":l.a.createElement("button",{className:" btn btn-success",style:{},onClick:function(){!function(e,t){h()({title:"Are you sure?",text:"Once selected, you will not be able to reselect the options!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n?(fetch("http://localhost:5000/vote",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,userId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));r(t)})).catch((function(e){console.log(e)})),h()("You successfully has given your vote!",{icon:"success"})):h()("Again ,select your option!")}))}(e._id,d)}},"Vote"),E?l.a.createElement("button",{className:"btn disabled",style:{marginLeft:"47px",background:"red"}},"Already Voted"):"")))})))))},E=["Andhra Pradesh ","Arunachal Pradesh","Assam","Bihar ","Chhattisgarh","Delhi","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala ","Madhya Pradesh","Maharashtra","Manipur ","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim ","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],b=["MALE","FEMALE"],y=["Admin","Voter"],v=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){fetch("http://localhost:5000/posts",{}).then((function(e){return e.json()})).then((function(e){r(e.posts)}))}),[]);var c=a.map((function(e){return l.a.createElement("div",{style:{width:"207px",height:"200px",border:"1px solid grey",marginLeft:"10px",float:"left",marginBottom:"15px",background:"white",borderRadius:"15px"},key:e.title},l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("b",null,e.title.split(" ")[0])),l.a.createElement("img",{src:e.photo,style:{height:"130px",width:"140px",marginLeft:"31px",borderRadius:"10%"}}))}));return l.a.createElement("div",{className:"home"},l.a.createElement("div",{style:{width:"450px",height:"500px"}},c))},x=a(10),j=a.n(x),N=a(65),O=a.n(N),S=function(){var e=Object(n.useContext)(A),t=(e.state,e.dispatch),a=Object(s.f)(),r=Object(n.useState)(""),c=Object(o.a)(r,2),m=c[0],u=c[1],p=Object(n.useState)(""),d=Object(o.a)(p,2),h=d[0],f=d[1],g=Object(n.useState)(""),E=Object(o.a)(g,2),b=E[0],x=E[1];return l.a.createElement("div",{className:"mycard",style:{width:"60%",margin:"auto",paddingTop:"5%"}},l.a.createElement("p",null,l.a.createElement("b",{style:{marginLeft:"5%",fontSize:"24px"}})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"clo-6",style:{float:"left"}},l.a.createElement(v,null)),l.a.createElement("div",{className:"col-6",style:{float:"right",width:"42%"}},l.a.createElement("div",{className:"card ",style:{paddingLeft:"40px",paddingRight:"40px",paddingTop:"20px",border:"1px solid blue"}},l.a.createElement("img",{src:O.a,alt:"imahe",style:{height:"90px",width:"90px",borderRadius:"50%",alignSelf:"center",marginBottom:"15px"}}),l.a.createElement("div",null,l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",placeholder:"email",value:h,className:"form-control",style:{height:"50px",width:"80%",marginLeft:"10%"},onChange:function(e){return f(e.target.value)}}),l.a.createElement("br",null)),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"password",placeholder:"password",value:m,style:{height:"50px",width:"80%",marginLeft:"10%"},onChange:function(e){return u(e.target.value)},className:"form-control"})),l.a.createElement("br",null),l.a.createElement("div",{className:"col"},l.a.createElement("select",{className:"form-select",value:b,onChange:function(e){return x(e.target.value)},style:{height:"50px",width:"80%",marginLeft:"10%"}},y.map((function(e){return l.a.createElement("option",{value:e,key:e}," ",e," ")}))))),l.a.createElement("button",{className:"btn btn-success mt-4 ",style:{height:"50px",width:"80%",marginLeft:"10%"},onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h)?fetch("http://localhost:5000/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:m,email:h})}).then((function(e){return e.json()})).then((function(e){e.error?j.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),a.push("/"))})).catch((function(e){console.log(e)})):j.a.toast({html:"invalid email",classes:"#c62828 red darken-3"})}},"Login"),l.a.createElement("p",{style:{fontFamily:"Raleway",textAlign:"center",fontSize:"17px",marginTop:"20px"}},"Not Register ? ",l.a.createElement(i.b,{to:"/signup",style:{color:"grey",fontWeight:"600"}},"Register here")))))))},w=function(){var e=Object(s.f)(),t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),u=m[0],p=m[1],d=Object(n.useState)(""),h=Object(o.a)(d,2),f=h[0],g=h[1],y=Object(n.useState)(""),v=Object(o.a)(y,2),x=v[0],N=v[1],O=Object(n.useState)(""),S=Object(o.a)(O,2),w=S[0],k=S[1],C=Object(n.useState)(""),A=Object(o.a)(C,2),L=A[0],R=A[1],z=Object(n.useState)(""),T=Object(o.a)(z,2),I=T[0],J=T[1],B=Object(n.useState)(""),_=Object(o.a)(B,2),M=_[0],P=_[1],U=Object(n.useState)(""),W=Object(o.a)(U,2),F=W[0],V=W[1],D=Object(n.useState)(void 0),G=Object(o.a)(D,2),Z=G[0],$=G[1];Object(n.useEffect)((function(){Z&&H()}),[Z]);var H=function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(x)?fetch("http://localhost:5000/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:r,lastname:u,password:f,email:x,city:w,stateName:L,mobile:I,branch:M,pic:Z})}).then((function(e){return e.json()})).then((function(t){t.error?j.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(j.a.toast({html:t.message,classes:"#43a047 green darken-1"}),e.push("/signin"))})).catch((function(e){console.log(e)})):j.a.toast({html:"invalid email",classes:"#c62828 red darken-3"})},K=function(){F?function(){var e=new FormData;e.append("file",F),e.append("upload_preset","voting"),e.append("cloud_name","dvfpkko1z"),fetch("https://api.cloudinary.com/v1_1/dvfpkko1z/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){$(e.url)})).catch((function(e){console.log(e)}))}():H()};return l.a.createElement("div",{className:"col-5",style:{margin:"auto"}},l.a.createElement("div",{className:"card px-5 py-2",style:{margin:"5%"}},l.a.createElement("h4",{style:{margin:"auto",marginBottom:"20px"}},"Registration"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",class:"form-control",value:r,onChange:function(e){return c(e.target.value)},placeholder:"First Name"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",class:"form-control",value:u,onChange:function(e){return p(e.target.value)},placeholder:"Last Name"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",placeholder:"email",value:x,className:"form-control",onChange:function(e){return N(e.target.value)}})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"password",placeholder:"password",value:f,onChange:function(e){return g(e.target.value)},className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("input",{className:"form-control",type:"text",placeholder:"city",value:w,onChange:function(e){return k(e.target.value)}})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("select",{className:"form-select",value:L,onChange:function(e){return R(e.target.value)}},E.map((function(e){return l.a.createElement("option",{value:e,key:e}," ",e," ")}))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("input",{type:"number",value:I,onChange:function(e){return J(e.target.value)},className:"form-control",placeholder:"Reg No"})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("select",{className:"form-select",placeholder:"voter",value:M,onChange:function(e){return P(e.target.value)}},b.map((function(e){return l.a.createElement("option",{value:e,key:e}," ",e," ")}))))),l.a.createElement("br",null),l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("input",{type:"file",className:"form-control",onChange:function(e){return V(e.target.files[0])}}),l.a.createElement("label",{className:"input-group-text",for:"inputGroupFile02"},"Upload")),l.a.createElement("button",{className:"btn btn-success mb-4 mt-2",onClick:function(){return K()}},"Register")))},k=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){fetch("http://localhost:5000/posts",{}).then((function(e){return e.json()})).then((function(e){r(e.posts)}))}),[]);var c=0;return a.map((function(e){c+=e.votes.length})),l.a.createElement("div",null,l.a.createElement("table",{style:{width:"80%",marginTop:"50px",marginLeft:"10%"}},l.a.createElement("thead",{style:{fontSize:"22px"}},l.a.createElement("tr",null,l.a.createElement("th",null,"Option"),l.a.createElement("th",null,"Symbol"),l.a.createElement("th",null,"Vote"),l.a.createElement("th",null,"Persentage Vote"))),a.map((function(e){return l.a.createElement("tbody",{key:e.title,style:{padding:"5px"}},l.a.createElement("tr",null,l.a.createElement("td",null,e.title),l.a.createElement("td",null,l.a.createElement("img",{src:e.photo,style:{width:"150px",height:"150px",paddingTop:"10px",paddingBottom:"10px"}})),l.a.createElement("td",{style:{fontSize:"19px",fontWeight:"700"}},e.votes.length),l.a.createElement("td",null,(e.votes.length/c*100).toFixed(2),"%")))}))),l.a.createElement("p",{style:{fontSize:"30px"}},l.a.createElement("b",{style:{marginLeft:"39%",backgroundColor:"white",marginTop:"150px"}},"Total counting Vote : ",c)))},C=function(e,t){return"USER"==t.type?t.payload:"CLEAR"==t.type?null:e},A=Object(n.createContext)(),L=function(){var e=Object(s.f)(),t=Object(n.useContext)(A),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?a({type:"USER",payload:t}):e.push("/signin")}),[]),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/"},l.a.createElement(g,null)),l.a.createElement(s.a,{path:"/signin"},l.a.createElement(S,null)),l.a.createElement(s.a,{path:"/signup"},l.a.createElement(w,null)),l.a.createElement(s.a,{path:"/profile"},l.a.createElement(f,null)),l.a.createElement(s.a,{path:"/result"},l.a.createElement(k,null)))};var R=function(){var e=Object(n.useReducer)(C,null),t=Object(o.a)(e,2),a=t[0],r=t[1];return l.a.createElement(A.Provider,{value:{state:a,dispatch:r}},l.a.createElement(i.a,null,l.a.createElement(m,null),l.a.createElement(L,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(171);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a.p+"static/media/Capture.173f5b30.JPG"},67:function(e,t,a){e.exports=a(172)},72:function(e,t,a){},77:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.088d60c8.chunk.js.map